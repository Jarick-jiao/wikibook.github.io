<!DOCTYPE html>
<html lang="zh">
  <head>
    <title>
        Hugo site build - Jarick Blog Book
      </title>
        <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    
    <meta name="theme-color" content="#000000" />
    
    <meta http-equiv="window-target" content="_top" />
    
    
    <meta name="description" content="Hugo site to Github Pages for Github Actions" />
    <meta name="generator" content="Hugo 0.81.0 with theme pure" />
    <title>Hugo site build - Jarick Blog Book</title>
    
    
    <link rel="stylesheet" href="https://jarick-jiao.github.io/wikibook.github.io/css/style.min.6f90022f237877ae2514ec95f3c9cca9f2314394f20800ca037a497e20053122.css">
    
    <link rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/9.15.10/styles/github.min.css" async>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css" async>
    <meta property="og:title" content="Hugo site build" />
<meta property="og:description" content="Hugo site to Github Pages for Github Actions" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jarick-jiao.github.io/wikibook.github.io/2021/02/hugosite/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-02-22T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2021-02-22T00:00:00&#43;00:00" />

<meta itemprop="name" content="Hugo site build">
<meta itemprop="description" content="Hugo site to Github Pages for Github Actions"><meta itemprop="datePublished" content="2021-02-22T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2021-02-22T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="2163">
<meta itemprop="keywords" content="Hugo 建站," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Hugo site build"/>
<meta name="twitter:description" content="Hugo site to Github Pages for Github Actions"/>

    <!--[if lte IE 9]>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
      <![endif]-->

    <!--[if lt IE 9]>
        <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
      <![endif]-->
  </head>

  
  

  <body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader">
    <div class="slimContent">
      <div class="navbar-header">
        <div class="profile-block text-center">
          <a id="avatar" href="http://1.1.1.1:8090/" target="_blank">
            <img class="img-circle img-rotate" src="https://jarick-jiao.github.io/wikibook.github.io/avatar01.png" width="200" height="200">
          </a>
          <h2 id="name" class="hidden-xs hidden-sm">Jarick</h2>
          <h3 id="title" class="hidden-xs hidden-sm hidden-md">Jarick Blog Book</h3>
          <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i>Shenzhen, China</small>
        </div><div class="search" id="search-form-wrap">
    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i
                        class="icon icon-search"></i></button>
            </span>
        </div>
        <div class="ins-search">
            <div class="ins-search-mask"></div>
            <div class="ins-search-container">
                <div class="ins-input-wrapper">
                    <input type="text" class="ins-search-input" placeholder="想要查找什么..."
                        x-webkit-speech />
                    <button type="button" class="close ins-close ins-selectable" data-dismiss="modal"
                        aria-label="Close"><span aria-hidden="true">×</span></button>
                </div>
                <div class="ins-section-wrapper">
                    <div class="ins-section-container"></div>
                </div>
            </div>
        </div>
    </form>
</div>
        <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
        <ul class="nav navbar-nav main-nav">
            <li class="menu-item menu-item-home">
                <a href="/wikibook.github.io/">
                    <i class="icon icon-home-fill"></i>
                  <span class="menu-title">所有文章</span>
                </a>
            </li>
            <li class="menu-item menu-item-archives">
                <a href="/wikibook.github.io/posts/">
                    <i class="icon icon-archives-fill"></i>
                  <span class="menu-title">最新分享</span>
                </a>
            </li>
            <li class="menu-item menu-item-categories">
                <a href="/wikibook.github.io/categories/">
                    <i class="icon icon-folder"></i>
                  <span class="menu-title">产品归类</span>
                </a>
            </li>
            <li class="menu-item menu-item-tags">
                <a href="/wikibook.github.io/tags/">
                    <i class="icon icon-tags"></i>
                  <span class="menu-title">技术方向</span>
                </a>
            </li>
            <li class="menu-item menu-item-about">
                <a href="/wikibook.github.io/about/">
                    <i class="icon icon-cup-fill"></i>
                  <span class="menu-title">与我有关</span>
                </a>
            </li>
        </ul>
      </nav>
    </div>
  </header>

<aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content"><p>Jarick Blog Book</p>
            </div>
        </div>
    </div>
</div>

      <div class="widget">
    <h3 class="widget-title"> 标签</h3>
    <div id="tag-cloud-list" class="widget-body">
            
            
            <a href="https://jarick-jiao.github.io/wikibook.github.io/tags/Hugo-%E5%BB%BA%E7%AB%99/" class="tag-list-link" rel="1">Hugo-建站<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://jarick-jiao.github.io/wikibook.github.io/tags/%E4%B8%93%E4%B8%9A%E6%8A%80%E6%9C%AF/" class="tag-list-link" rel="1">专业技术<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://jarick-jiao.github.io/wikibook.github.io/tags/%E5%8D%9A%E5%AE%A2%E6%8C%87%E5%8D%97/" class="tag-list-link" rel="1">博客指南<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://jarick-jiao.github.io/wikibook.github.io/tags/%E6%A1%88%E4%BE%8B%E5%88%86%E4%BA%AB/" class="tag-list-link" rel="1">案例分享<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://jarick-jiao.github.io/wikibook.github.io/tags/%E6%B5%81%E7%A8%8B%E5%88%B6%E5%BA%A6/" class="tag-list-link" rel="1">流程制度<span
               class="tag-list-count">1</span></a>
            
    </div>
<script>
document.onreadystatechange = () => {
  if (document.readyState === 'complete') {
    tagCloud('#tag-cloud-list a',  8 ,  20 );
  }
};

function tagCloud(where, min, max) {
  let iMax = 0;
  let iMin = 0;
  $(where).each(function() {
    let weight = Number($(this).attr("rel"));
    if(iMax < weight) iMax = weight;
    if(iMin > weight || iMin == 0) iMin = weight;
  });
  let step = (max - min)/(iMax - iMin);
  $(where).each(function() {
    let weight = $(this).attr("rel") - iMin;
    $(this).css({"font-size": min + (weight * step) + 'px'});
  });
};
</script>
</div>

      <div class="widget">
    <h3 class="widget-title"> 分类</h3>
    <div class="widget-body">
        <ul class="category-list">
            <li class="category-list-item"><a href="https://jarick-jiao.github.io/wikibook.github.io/categories/Github/" class="category-list-link">Github</a><span class="category-list-count">1</span></li>
            <li class="category-list-item"><a href="https://jarick-jiao.github.io/wikibook.github.io/categories/Hugo/" class="category-list-link">Hugo</a><span class="category-list-count">1</span></li>
            <li class="category-list-item"><a href="https://jarick-jiao.github.io/wikibook.github.io/categories/%E4%BA%91%E5%B9%B3%E5%8F%B0/" class="category-list-link">云平台</a><span class="category-list-count">1</span></li>
            <li class="category-list-item"><a href="https://jarick-jiao.github.io/wikibook.github.io/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/" class="category-list-link">大数据</a><span class="category-list-count">1</span></li>
            <li class="category-list-item"><a href="https://jarick-jiao.github.io/wikibook.github.io/categories/%E5%AE%B9%E5%99%A8%E6%9C%8D%E5%8A%A1/" class="category-list-link">容器服务</a><span class="category-list-count">1</span></li>
            <li class="category-list-item"><a href="https://jarick-jiao.github.io/wikibook.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" class="category-list-link">数据库</a><span class="category-list-count">1</span></li>
        </ul>
    </div>
</div>
      <div class="widget">
    <h3 class="widget-title"> 标签</h3>
    <div class="widget-body">
        <ul class="tag-list">
            
            
            <li class="tag-list-item"><a href="https://jarick-jiao.github.io/wikibook.github.io/tags/Hugo-%E5%BB%BA%E7%AB%99/" class="tag-list-link">Hugo-建站</a><span
                    class="tag-list-count">1</span></li>
            
            
            <li class="tag-list-item"><a href="https://jarick-jiao.github.io/wikibook.github.io/tags/%E4%B8%93%E4%B8%9A%E6%8A%80%E6%9C%AF/" class="tag-list-link">专业技术</a><span
                    class="tag-list-count">1</span></li>
            
            
            <li class="tag-list-item"><a href="https://jarick-jiao.github.io/wikibook.github.io/tags/%E5%8D%9A%E5%AE%A2%E6%8C%87%E5%8D%97/" class="tag-list-link">博客指南</a><span
                    class="tag-list-count">1</span></li>
            
            
            <li class="tag-list-item"><a href="https://jarick-jiao.github.io/wikibook.github.io/tags/%E6%A1%88%E4%BE%8B%E5%88%86%E4%BA%AB/" class="tag-list-link">案例分享</a><span
                    class="tag-list-count">1</span></li>
            
            
            <li class="tag-list-item"><a href="https://jarick-jiao.github.io/wikibook.github.io/tags/%E6%B5%81%E7%A8%8B%E5%88%B6%E5%BA%A6/" class="tag-list-link">流程制度</a><span
                    class="tag-list-count">1</span></li>
            
        </ul>

    </div>
</div>
      
<div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
        <ul class="recent-post-list list-unstyled no-thumbnail">
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://jarick-jiao.github.io/wikibook.github.io/2021/02/hugosite/" class="title">Hugo site build</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2021-02-22 00:00:00 &#43;0000 UTC" itemprop="datePublished">2021-02-22</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://jarick-jiao.github.io/wikibook.github.io/2021/02/first/" class="title">开篇第一课</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2021-02-22 00:00:00 &#43;0000 UTC" itemprop="datePublished">2021-02-22</time>
                    </p>
                </div>
            </li>
        </ul>
    </div>
</div>
  </div>
</aside>

    
    
<aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <h4 class="toc-title">文章目录</h4>
    <nav id="toc" class="js-toc toc">

    </nav>
  </div>
</aside>
<main class="main" role="main"><div class="content">
  <article id="-" class="article article-type-" itemscope
    itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      <h1 itemprop="name">
  <a
    class="article-title"
    href="/wikibook.github.io/2021/02/hugosite/"
    >Hugo site build</a
  >
</h1>

      <div class="article-meta">
        
<span class="article-date">
  <i class="icon icon-calendar-check"></i>&nbsp;
<a href="https://jarick-jiao.github.io/wikibook.github.io/2021/02/hugosite/" class="article-date">
  <time datetime="2021-02-22 00:00:00 &#43;0000 UTC" itemprop="datePublished">2021-02-22</time>
</a>
</span>
<span class="article-category">
  <i class="icon icon-folder"></i>&nbsp;
  <a class="article-category-link" href="/wikibook.github.io/categories/Hugo/"> Hugo </a>
  <a class="article-category-link" href="/wikibook.github.io/categories/Github/"> Github </a>
</span>  
  <span class="article-tag">
    <i class="icon icon-tags"></i>&nbsp;
    <a class="article-tag-link" href="/wikibook.github.io/tags/Hugo-%E5%BB%BA%E7%AB%99/"> Hugo 建站 </a>
  </span>

	<span class="article-read hidden-xs">
	    <i class="icon icon-eye-fill" aria-hidden="true"></i>
	    <span id="busuanzi_container_page_pv">
			<span id="busuanzi_value_page_pv">0</span>
		</span>
	</span>
		<span class="post-wordcount hidden-xs" itemprop="wordCount">字数统计: 2163字</span>
		<span class="post-readcount hidden-xs" itemprop="timeRequired">阅读时长: 5分 </span>
      </div>
    </div>
    <div class="article-entry marked-body js-toc-content" itemprop="articleBody">
      <p>Hugo site to Github Pages for Github Actions</p>
<h2 id="hugo-博客建站方法">Hugo 博客建站方法</h2>
<p><strong>参考相关链接：</strong></p>
<ol>
<li>Github站点：<a href="https://github.com/gohugoio/hugo">https://github.com/gohugoio/hugo</a></li>
<li>官方站点： <a href="https://gohugo.io/getting-started/">https://gohugo.io/getting-started/</a></li>
<li>Github Actions: <a href="https://cloud.tencent.com/developer/article/1647964">https://cloud.tencent.com/developer/article/1647964</a></li>
<li>参考以下流程图：
<img src="https://ask.qcloudimg.com/http-save/yehe-1027071/xwtqyzj2wn.png?imageView2/2/w/1620" alt="流程图"></li>
</ol>
<blockquote>
<p>本地添加文章，提交到Github，会自动触发Github Actions 发布到Github Pages进行托管。之后即可通过 Github 给 Pages 生成的 URL 访问即可。</p>
</blockquote>
<h3 id="hugo本地site选择合适的主题">Hugo本地site，选择合适的主题</h3>
<h4 id="install-hugo">Install Hugo</h4>
<ol>
<li>Hugo 下载： <a href="https://github.com/gohugoio/hugo/releases">https://github.com/gohugoio/hugo/releases</a></li>
<li>创建Hugo工作目录:  mkdir GitHubRepo ; cd GitHubRepo</li>
<li>hugo &ndash;help</li>
</ol>
<pre><code class="language-shell">Hugo is a Fast and Flexible Static Site Generator
built with love by spf13 and friends in Go.

Complete documentation is available at http://gohugo.io/.

Usage:
  hugo [flags]
  hugo [command]

Available Commands:
  config      Print the site configuration
  convert     Convert your content to different formats
  deploy      Deploy your site to a Cloud provider.
  env         Print Hugo version and environment info
  gen         A collection of several useful generators.
  help        Help about any command
  import      Import your site from others.
  list        Listing out various types of content
  mod         Various Hugo Modules helpers.
  new         Create new content for your site
  server      A high performance webserver
  version     Print the version number of Hugo

Flags:
  -b, --baseURL string             hostname (and path) to the root, e.g. http://spf13.com/
  -D, --buildDrafts                include content marked as draft
  -E, --buildExpired               include expired content
  -F, --buildFuture                include content with publishdate in the future
      --cacheDir string            filesystem path to cache directory. Defaults: $TMPDIR/hugo_cache/
      --cleanDestinationDir        remove files from destination not found in static directories
      --config string              config file (default is path/config.yaml|json|toml)
      --configDir string           config dir (default &quot;config&quot;)
  -c, --contentDir string          filesystem path to content directory
      --debug                      debug output
  -d, --destination string         filesystem path to write files to
      --disableKinds strings       disable different kind of pages (home, RSS etc.)
      --enableGitInfo              add Git revision, date and author info to the pages
  -e, --environment string         build environment
      --forceSyncStatic            copy all files when static is changed.
      --gc                         enable to run some cleanup tasks (remove unused cache files) after the build
  -h, --help                       help for hugo
      --i18n-warnings              print missing translations
      --ignoreCache                ignores the cache directory
      --ignoreVendor               ignores any _vendor directory
      --ignoreVendorPaths string   ignores any _vendor for module paths matching the given Glob pattern
  -l, --layoutDir string           filesystem path to layout directory
      --log                        enable Logging
      --logFile string             log File path (if set, logging enabled automatically)
      --minify                     minify any supported output format (HTML, XML etc.)
      --noChmod                    don't sync permission mode of files
      --noTimes                    don't sync modification time of files
      --path-warnings              print warnings on duplicate target paths etc.
      --print-mem                  print memory usage to screen at intervals
      --quiet                      build in quiet mode
      --renderToMemory             render to memory (only useful for benchmark testing)
  -s, --source string              filesystem path to read files relative from
      --templateMetrics            display metrics about template executions
      --templateMetricsHints       calculate some improvement hints when combined with --templateMetrics
  -t, --theme strings              themes to use (located in /themes/THEMENAME/)
      --themesDir string           filesystem path to themes directory
      --trace file                 write trace to file (not useful in general)
  -v, --verbose                    verbose output
      --verboseLog                 verbose logging
  -w, --watch                      watch filesystem for changes and recreate as needed

</code></pre>
<h4 id="build-site">Build site</h4>
<ol>
<li>hugo new site .</li>
<li>hugo new site [SiteName] #也可以指定生成站点目录</li>
</ol>
<h4 id="clone-theme">Clone Theme</h4>
<p>Theme 主题库： <a href="https://themes.gohugo.io/">https://themes.gohugo.io/</a></p>
<pre><code class="language-code">cd themes ; git clone https://github.com/spf13/hyde.git #(参考主题)
</code></pre>
<p>编辑config.yml 部署相关配置</p>
<pre><code class="language-yaml">theme: pure # 主题名称（必填），参考 theme 目录下文件夹名称
baseURL: https://GithubName.github.io/wikibook.github.io #如需发布，则需要指定URL（发布站点 GitHab Pages），本地发布可不填
publishDir : &quot;./public&quot; # 静态站点存放路径，默认路径
...
</code></pre>
<h4 id="启动本地站点">启动本地站点</h4>
<p>本地启动预览</p>
<pre><code class="language-code">hugo server --bind=&quot;0.0.0.0&quot; -v -w -p 11311 -b http://192.168.7.221 # -b --baseURL string
</code></pre>
<p>生成静态站点</p>
<pre><code class="language-code">hugo --theme=pure --buildDrafts --config=muconfig.yml --baseUrl=&quot;http://192.168.7.221&quot;

# 默认public目录，生成静态网站数据
</code></pre>
<h2 id="github-pages-站点和后端存储站点">GitHub pages 站点和后端存储站点</h2>
<ol>
<li>生成SSH Key，生成的Public Key和Private Key</li>
</ol>
<p>参考官方文档：<a href="https://docs.github.com/en/github/authenticating-to-github/error-permission-denied-publickey">https://docs.github.com/en/github/authenticating-to-github/error-permission-denied-publickey</a></p>
<pre><code class="language-shell">
1、 家目录是否存在Key，如果不存在则生成。

ssh-keygen -t rsa -b 2048 -C &quot;你自己的邮箱地址&quot; # 修改邮箱地址为你自己的邮箱地址，注意此处邮箱地址前后的双引号为英文格式双引号；
#git config --global --list 可获取邮箱地址：生成过程中可以自定义key名称，（可选）

2、 $ ssh-agent -s  #确认ssh-agent是否开启状态
SSH_AUTH_SOCK=/tmp/ssh-DTHO70HfeE51/agent.2003; export SSH_AUTH_SOCK;
SSH_AGENT_PID=2004; export SSH_AGENT_PID;
echo Agent pid 2004;


3、 $ ssh-add -l -E sha256
you have a private key generated and loaded into SSH.


添加key 到 github/Settings/SSH AND GPG keys

4、 多key情况下，需要编辑以下文件：（可选）

$ cat /c/Users/Jarick/.ssh/config

Host github
    User git
    HostName github.com
    PreferredAuthentications publickey
    IdentityFile /c/Users/Jarick/.ssh/id_rsa
    ServerAliveInterval 300
    ServerAliveCountMax 10


5、 测试验证
$ ssh -T git@github.com
&gt; Hi username! You've successfully authenticated...

</code></pre>
<ol start="2">
<li>
<p>创建后端存储库：存储Hugo核心数据<br>
Github blog source： blog<br>
类型：Private(推荐)/Public<br>
ssh key： <code>&lt;Private Key&gt;</code><br>
配置类型：Secrets<br>
配置变量： ACTIONS_DEPLOY_KEY   #参考流水线变量 deploy_key
其他配置： 开启 Allow write access 选项
默认branch： master</p>
</li>
<li>
<p>创建发布库：发布 public目录生成的静态站点<br>
Github blog publish： wikibook.github.io<br>
类型：Public<br>
名称格式：.github.io 结尾<br>
ssh key： <code>Public Key</code><br>
配置类型： Deploy Keys<br>
发布URL：<a href="https://GithubName.github.io/wikibook.github.io">https://GithubName.github.io/wikibook.github.io</a> # 获取路径：wikibook.github.io/setting/GitHub Pages/Your site is published at :xxxx</p>
</li>
<li>
<p>发布站点到GitHub Pages</p>
</li>
</ol>
<ul>
<li>手动发布，为保持源库git统一，可新建public目录。</li>
</ul>
<blockquote>
<p>有关public目录位置的说明：<br>
手动发布：为了不破坏存储库整体性，通过在存储库目录外建public文件夹，相关配置参数： publishDir : &ldquo;../public&rdquo;<br>
流水线发布： 只有存储库代码变化提交之后，就会触发静态站点重建，因此选择在存储库内创建public目录，相关配置参数： publishDir : &ldquo;../public&rdquo;</p>
</blockquote>
<ul>
<li>修改config.yml</li>
</ul>
<pre><code class="language-code">baseURL: https://GithubName.github.io/wikibook.github.io
publishDir : &quot;../public&quot;  
</code></pre>
<ul>
<li>cd GitHubRepo; touch deploy.sh</li>
</ul>
<pre><code class="language-shell">#!/bin/sh

# If a command fails then the deploy stops
set -e

printf &quot;\033[0;32mDeploying updates to GitHub...\033[0m\n&quot;

# Build the project.
#hugo -D # if using a theme, replace with `hugo -t &lt;YOURTHEME&gt;`

hugo --theme=pure --buildDrafts --config=muconfig.yml --baseUrl=&quot;https://GithubName.github.io/wikibook.github.io/&quot;

# Go To Public folder
cd ../public

# Add changes to git.
git add .

# Commit changes.
msg=&quot;rebuilding hugo site $(date)&quot;
if [ -n &quot;$*&quot; ]; then
    msg=&quot;$*&quot;
fi
git commit -m &quot;$msg&quot;

# Push source and build repos.
git push origin master
</code></pre>
<ul>
<li>执行发布脚本，访问站点<br>
执行： ./deploy.sh<br>
检查： ls ../public 检查生产静态站点数据，访问发布库<code>&lt;githubname/registry&gt;.github.io</code>.<br>
访问： <a href="https://GithubName.github.io/wikibook.github.io/">https://GithubName.github.io/wikibook.github.io/</a></li>
</ul>
<h2 id="github-actions-流水线">GitHub Actions 流水线</h2>
<ol>
<li>编写workflows</li>
</ol>
<p>编辑 main.yml</p>
<pre><code class="language-yaml">name: Deploy Hugo Site to Github Pages on Master Branch

on:
  push:
    branches:
      - master  #发布库branch，获取路径：wikibook.github.io/setting/GitHub Pages/Source

jobs:
  build-deploy:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v1  # v2 does not have submodules option now
       # with:
       #   submodules: true

      - name: Setup Hugo
        uses: peaceiris/actions-hugo@v2
        with:
          hugo-version: '0.81.0'  #hugo version
          extended: true  #其他版本

      - name: Build
        run:  hugo --theme=pure   --buildDrafts  --baseUrl=&quot;https://GithubName.github.io/wikibook.github.io/&quot; #发布静态站点

      - name: Deploy
        uses: peaceiris/actions-gh-pages@v3
        with:
          deploy_key: ${{ secrets.ACTIONS_DEPLOY_KEY }} # 这里的 ACTIONS_DEPLOY_KEY 则是上面设置 Private Key的变量名
          external_repository: GithubName/wikibook.github.io # Github Pages 远程仓库
          publish_dir: &quot;./public&quot;  # 发布静态站点数据目录（默认hugo工作目录public文件夹）
          keep_files: false # remove existing files
          publish_branch: master  # deploying branch 本地branch分支
          commit_message: ${{ github.event.head_commit.message }} 

</code></pre>
<ol start="2">
<li>触发流水线并发布站点</li>
</ol>
<ul>
<li>
<p>编辑站点网页: content/posts/test.md</p>
</li>
<li>
<p>提交代码并发布</p>
</li>
</ul>
<pre><code class="language-shell">git add content/posts/test.md
msg=&quot;rebuilding hugo site $(date)&quot;
git commit -m &quot;$msg&quot;
git push origin master
</code></pre>
<h2 id="预览调试">预览调试</h2>
<p>后端存储库 Actions ，查看All workflows 任务已经完成，站点可以正常访问。</p>
<h2 id="config-其他特殊配置项">config 其他特殊配置项</h2>
<ul>
<li>
<p>保持分类的原始名字（false会做转小写处理）<br>
preserveTaxonomyNames = true</p>
</li>
<li>
<p>是否禁止URL Path转小写<br>
disablePathToLower = true</p>
</li>
<li>
<p>开启draft : true</p>
</li>
</ul>
    </div>
    <div class="article-footer">
<blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接: </strong>
      <a href="https://jarick-jiao.github.io/wikibook.github.io/2021/02/hugosite/" title="Hugo site build" target="_blank" rel="external">https://jarick-jiao.github.io/wikibook.github.io/2021/02/hugosite/</a>
    </li>
    <li class="post-copyright-license">
      <strong>License: </strong>
        <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">Jarick_Blog_Book</a>
    </li>
  </ul>
</blockquote>

<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="http://1.1.1.1:8090/" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="https://jarick-jiao.github.io/wikibook.github.io/avatar01.png" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="http://1.1.1.1:8090/" target="_blank"><span class="text-dark">Jarick</span><small class="ml-1x">Jarick Blog Book</small></a></h3>
        <div>Jarick_Blog_Book</div>
      </div>
    </figure>
  </div>
</div>

    </div>
  </article>
</div><nav class="bar bar-footer clearfix" data-stick-bottom>
    <div class="bar-inner">
        <ul class="pager pull-left">
            <li class="prev">
                <a href="https://jarick-jiao.github.io/wikibook.github.io/about/" title="与我有关"><i
                        class="icon icon-angle-left"
                        aria-hidden="true"></i><span>&nbsp;&nbsp;下一篇</span></a>
            </li>
            
            <li class="toggle-toc">
                <a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false"
                    title="文章目录" role="button">
                    <span>[&nbsp;</span><span>文章目录</span>
                    <i class="text-collapsed icon icon-anchor"></i>
                    <i class="text-in icon icon-close"></i>
                    <span>]</span>
                </a>
            </li>
        </ul>
        
        <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal"
            data-target="#donateModal"><span>赏</span></button>
        
        <div class="bar-right">
            <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter"
                data-mobile-sites="weibo,qq,qzone"></div>
        </div>
    </div>
</nav>


<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content donate">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                    aria-hidden="true">&times;</span></button>
            <div class="modal-body">
                <div class="donate-box">
                    <div class="donate-head">
                        <p>感谢您的支持,我会继续努力的!</p>
                    </div>
                    <div class="tab-content">
                        <div role="tabpanel" class="tab-pane fade active in" id="alipay">
                            <div class="donate-payimg">
                                <img src="https://jarick-jiao.github.io/wikibook.github.io/donate/alipayimg-jarick.png"
                                    alt="扫码支持" title="扫一扫" />
                            </div>
                            <p class="text-muted mv">扫码打赏, 多少你说了算~</p>
                            <p class="text-grey">打开支付宝扫一扫，即可进行扫码打赏哦~</p>
                        </div>
                        <div role="tabpanel" class="tab-pane fade" id="wechatpay">
                            <div class="donate-payimg">
                                <img src="https://jarick-jiao.github.io/wikibook.github.io/donate/wechatpayimg-jarick.png"
                                    alt="扫码支持" title="扫一扫" />
                            </div>
                            <p class="text-muted mv">扫码打赏, 多少你说了算~</p>
                            <p class="text-grey">打开微信扫一扫，即可进行扫码打赏哦</p>
                        </div>
                    </div>
                    <div class="donate-footer">
                        <ul class="nav nav-tabs nav-justified" role="tablist">
                            <li role="presentation" class="active">
                                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay"
                                    aria-expanded="true"><i class="icon icon-alipay"></i> 支付宝</a>
                            </li>
                            <li role="presentation" class="">
                                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab"
                                    aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i>
                                    微信支付</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

</main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
<ul class="social-links">
    <li><a href="https://github.com" target="_blank" title="github" data-toggle=tooltip data-placement=top >
            <i class="icon icon-github"></i></a></li>
    <li><a href="https://jarick-jiao.github.io/index.xml" target="_blank" title="rss" data-toggle=tooltip data-placement=top >
            <i class="icon icon-rss"></i></a></li>
</ul>
  <div class="copyright">
    &copy;2021  -
    2021
    <div class="publishby">
        Theme by <a href="https://github.com/xiaoheiAh" target="_blank"> xiaoheiAh </a>base on<a href="https://github.com/xiaoheiAh/hugo-theme-pure" target="_blank"> pure</a>.
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_SVG"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
            showMathMenu: false, //disables context menu
            tex2jax: {
            inlineMath: [ ['$','$'], ['\\(','\\)'] ]
           }
    });
</script>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
<script>
    window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/highlight.min.js"></script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/python.min.js" defer></script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/javascript.min.js" defer></script><script>
    hljs.configure({
        tabReplace: '    ', 
        classPrefix: ''     
        
    })
    hljs.initHighlightingOnLoad();
</script>
<script src="https://jarick-jiao.github.io/wikibook.github.io/js/application.min.a94ab19cb63a95c8d7fbd7b85cab3ddeea8c369bdf75b9cab6708787ead123af.js"></script>
<script src="https://jarick-jiao.github.io/wikibook.github.io/js/plugin.min.19c5bcb2fb0789ab4f2b7834e5ceb5e92635645605bab902c1024b25f1502364.js"></script>

<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '页面',
                CATEGORIES: '分类',
                TAGS: '标签',
                UNTITLED: '(未命名)',
            },
            ROOT_URL: 'https:\/\/jarick-jiao.github.io\/wikibook.github.io\/',
            CONTENT_URL: 'https:\/\/jarick-jiao.github.io\/wikibook.github.io\/\/searchindex.json ',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script type="text/javascript" src="https://jarick-jiao.github.io/wikibook.github.io/js/insight.min.4a2d52de4bfff73e0c688404fe3d17c9a3ae12d9888e1e1ac9c690e4890de2ded50fe55f2b819c2ba55435a76f396f3ea6805765f0b0af5635cdf74ea459eab0.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>
<script>
    tocbot.init({
        
        tocSelector: '.js-toc',
        
        contentSelector: '.js-toc-content',
        
        headingSelector: 'h1, h2, h3',
        
        hasInnerContainers: true,
    });
</script>

<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  </body>
</html>
